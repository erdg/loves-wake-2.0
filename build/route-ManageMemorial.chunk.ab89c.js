webpackJsonp([6],{FoBm:function(t,e,n){"use strict";function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var c=n("KM04"),s=(n("/C1n"),n("/QC5")),h=Object(c.h)("h3",null,"Items"),u=function(t){return Object(c.h)("div",null,h,Object(c.h)("button",{class:"btn btn-primary",onClick:t.newItem},"Add Item"),t.items.map(function(e){return Object(c.h)(d,{id:e.id,title:e.title,date:e.start,location:e.location,src:e.src,showModal:function(e){return t.showModal(e)},edited:e.edited})}))},d=function(t){return Object(c.h)("div",{class:"tile",style:"max-width: 500px;"+(t.edited?"background:lightcoral;":"")},Object(c.h)("div",{class:"tile-icon"},Object(c.h)("img",{class:"responsive-img",src:t.src,style:"max-width:200px"})),Object(c.h)("div",{class:"tile-content"},Object(c.h)("p",{class:"tile-title"},t.title),Object(c.h)("div",{class:"tile-subtitle text-gray"},t.location),Object(c.h)("div",{class:"tile-subtitle text-gray"},t.date)),Object(c.h)("div",{class:"tile-action"},Object(c.h)("button",{class:"btn",onClick:function(){return t.showModal(t.id)}},"Edit item")))},m=u,b=n("9qb7"),p=n.n(b),f=n("AM5m"),j=function(t){return Object(c.h)("div",{class:"panel"},Object(c.h)("div",{class:"panel-body mt-2"},t.item.src&&Object(c.h)("img",{src:t.item.src,alt:t.item.title,class:"img-responsive my-2"}),Object(c.h)("h4",null,t.item.title),Object(c.h)("div",{class:"text-gray d-inline"},t.item.location),Object(c.h)("div",{class:"text-gray d-inline mx-2"},t.item.start),Object(c.h)("p",null,t.item.caption)))},O=j,v=function(t){function e(){return o(this,t.apply(this,arguments))}return i(e,t),e.prototype.render=function(t){var e=p()("modal","modal-lg",{active:t.showModal},{"has-error":t.modalError});return Object(c.h)("div",{class:e},Object(c.h)("a",{onClick:t.hideModal,class:"modal-overlay","aria-label":"Close"}),Object(c.h)("div",{class:"modal-container"},Object(c.h)("div",{class:"modal-header"},Object(c.h)("a",{onClick:t.hideModal,class:"btn btn-clear float-right","aria-label":"Close"}),Object(c.h)("div",{class:"modal-title h5"},t.item.id?"Edit Item":"Add Item")),Object(c.h)("div",{class:"modal-body"},Object(c.h)("div",{class:"content container columns"},Object(c.h)("div",{class:"column col-6"},Object(c.h)(O,{item:t.item})),Object(c.h)("form",{class:"form-group column col-6"},Object(c.h)(f.e,{label:"Title",name:"title",value:t.item.title,onChange:t.onChange}),Object(c.h)(f.e,{label:"Location",name:"location",value:t.item.location,onChange:t.onChange}),Object(c.h)(f.a,{label:"Date",name:"start",value:t.item.start,onChange:t.onChange}),Object(c.h)("label",{class:"form-label"},"Change photo",Object(c.h)("input",{class:"form-input",type:"file",accept:".jpg, .jpeg, .png",value:t.item.file,onChange:t.onFileChange}))))),Object(c.h)("div",{class:"modal-footer"},Object(c.h)("button",{class:"btn btn-primary",onClick:t.item.id?t.updChronicle:t.newChronicle},t.item.id?"Update item":"Add item"))))},e}(c.Component),g=v,C=function(t){return Object(c.h)("p",null,"The public url for ",t.nm1,"'s Chronicle is",Object(c.h)("button",{class:"btn btn-link",onClick:function(){return Object(s.route)("/"+t.urlStr+"/"+t.urlNm+"/chronicle")}},"/"+t.urlStr+"/"+t.urlNm+"/chronicle"))},w=C,y=function(t){function e(){var n,o,i;l(this,e);for(var r=arguments.length,c=Array(r),s=0;s<r;s++)c[s]=arguments[s];return n=o=a(this,t.call.apply(t,[this].concat(c))),o.state={item:{},showModal:!1},o.onChange=function(t){var e=o.state.item;e[t.target.name]=t.target.value,o.setState({oldState:e})},o.onFileChange=function(t){var e=o.state.item;e.file=t.target.files[0],o.setState({oldState:e}),o.makeFileURL()},o.makeFileURL=function(){var t=o.state.item,e=new FileReader;e.onload=function(e){t.src=e.target.result,o.setState({oldState:t})},e.readAsDataURL(o.state.item.file)},o.updChronicle=function(){console.log("updChronicle"),o.hideModal();var t=o.state.item;t.edited=!1,o.setState({oldState:t})},o.newChronicle=function(){o.hideModal(),console.log("newChronicle")},o.showModal=function(t){var e=o.props.user.memorials.find(function(t){return t.urlNm===o.props.urlNm});o.setState({showModal:!0,item:e.items.find(function(e){return e.id===t})})},o.hideModal=function(){var t=o.state.item;t.edited=!0,o.setState({showModal:!1,modalError:!1,oldItem:t})},o.newItem=function(){o.showModal(),o.setState({item:{}})},i=n,a(o,i)}return r(e,t),e.prototype.render=function(){var t=this,e=this.props.user.memorials.find(function(e){return e.urlNm===t.props.urlNm});return Object(c.h)("div",null,Object(c.h)("h2",null,e.nm),Object(c.h)("figure",{class:"avatar avatar-xxl"},Object(c.h)("img",{src:e.avatar})),Object(c.h)(w,{nm1:e.nm1,urlStr:e.urlStr,urlNm:e.urlNm}),Object(c.h)(m,{showModal:this.showModal,items:e.items,newItem:this.newItem}),Object(c.h)(g,{showModal:this.state.showModal,hideModal:this.hideModal,updChronicle:this.updChronicle,newChronicle:this.newChronicle,onChange:this.onChange,onFileChange:this.onFileChange,item:this.state.item}))},e}(c.Component);e.default=y}});
//# sourceMappingURL=route-ManageMemorial.chunk.ab89c.js.map