{"version":3,"sources":["webpack:///route-user.chunk.f52a5.js","webpack:///./routes/user/ConfirmAccountModal.js","webpack:///./routes/user/MemorialList.js","webpack:///./routes/user/index.js","webpack:///./routes/user/style.css?a442"],"names":["webpackJsonp","SJD4","module","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","user__classCallCheck","instance","Constructor","user__possibleConstructorReturn","user__inherits","defineProperty","preact_min","preact_router_es","GridContainer","toast","api","classnames","classnames_default","n","form_inputs","_ref","class","_ref2","_ref3","ConfirmAccountModal_ConfirmAccountModal","_Component","ConfirmAccountModal","_temp","_this","_ret","_len","arguments","length","args","Array","_key","this","apply","concat","state","code","codeHasError","serverError","showServerError","confirmAccountSuccess","loading","onChange","e","_this$setState","setState","target","name","isNaN","confirmAccount","fetch","method","body","JSON","stringify","loginToken","window","sessionStorage","getItem","then","res","json","error","setItem","render","props","modalClasses","active","showModal","has-error","errorHint","d-hide","onClick","hideModal","aria-label","placeholder","location","reload","user_ConfirmAccountModal","style","style_default","MemorialList__ref","MemorialList__ref2","MemorialList__ref3","MemorialList_MemorialList","memorials","map","m","MemorialList_MemorialTile","urlNm","urlStr","nm","born","died","avatar","a","tileAvatar","src","user_MemorialList","d","user_User","user__ref","user__ref2","user__ref3","href","User","neverShowConfirmationToastAgain","console","log","_this2","avatarColumn","user","email","confirmed","onclick","contentColumn","rQOQ","exports"],"mappings":"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","file":"route-user.chunk.f52a5.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"SJD4\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ../node_modules/preact/dist/preact.min.js\nvar preact_min = __webpack_require__(\"KM04\");\nvar preact_min_default = /*#__PURE__*/__webpack_require__.n(preact_min);\n\n// EXTERNAL MODULE: ../node_modules/preact-router/dist/preact-router.es.js\nvar preact_router_es = __webpack_require__(\"/QC5\");\n\n// EXTERNAL MODULE: ./components/GridContainer/index.js\nvar GridContainer = __webpack_require__(\"v23/\");\n\n// EXTERNAL MODULE: ./components/toast.js\nvar toast = __webpack_require__(\"r33O\");\n\n// EXTERNAL MODULE: ./api/index.js\nvar api = __webpack_require__(\"/C1n\");\n\n// EXTERNAL MODULE: ../node_modules/classnames/index.js\nvar classnames = __webpack_require__(\"9qb7\");\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// EXTERNAL MODULE: ./components/form-inputs/index.js\nvar form_inputs = __webpack_require__(\"AM5m\");\n\n// CONCATENATED MODULE: ./routes/user/ConfirmAccountModal.js\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\nvar _ref = Object(preact_min[\"h\"])(\n   'div',\n   { 'class': 'modal-title h5' },\n   'Confirm Account'\n);\n\nvar _ref2 = Object(preact_min[\"h\"])(\n   'div',\n   null,\n   Object(preact_min[\"h\"])(\n      'div',\n      { 'class': 'toast toast-success' },\n      'You\\'re all set'\n   )\n);\n\nvar _ref3 = Object(preact_min[\"h\"])(\n   'p',\n   null,\n   'We sent you an email with a 6-digit code. Please enter the code below to confirm your account.'\n);\n\nvar ConfirmAccountModal_ConfirmAccountModal = function (_Component) {\n   _inherits(ConfirmAccountModal, _Component);\n\n   function ConfirmAccountModal() {\n      var _temp, _this, _ret;\n\n      _classCallCheck(this, ConfirmAccountModal);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n         args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = _possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n         // 6-digit confirmation code\n         code: '',\n         codeHasError: false,\n         serverError: '',\n         showServerError: false,\n         confirmAccountSuccess: false,\n         loading: false\n      }, _this.onChange = function (e) {\n         var _this$setState;\n\n         _this.setState((_this$setState = {}, _this$setState[e.target.name] = e.target.value, _this$setState));\n         _this.codeHasError();\n      }, _this.codeHasError = function () {\n         if (!_this.state.code || isNaN(_this.state.code) || !(_this.state.code.length === 6)) {\n            _this.setState({ codeHasError: true });\n            return true;\n         } else {\n            _this.setState({ codeHasError: false });\n            return false;\n         }\n      }, _this.confirmAccount = function () {\n         if (_this.codeHasError()) {\n            return;\n         }\n         _this.setState({ loading: true });\n         fetch(api[\"a\" /* default */] + '!confirmUser', {\n            method: \"POST\",\n            body: JSON.stringify({\n               loginToken: window.sessionStorage.getItem('loginToken'),\n               code: _this.state.code\n            })\n         }).then(function (res) {\n            return res.json();\n         }).then(function (json) {\n            if (json.error) {\n               _this.setState({\n                  // display errors and remove loading spinner\n                  serverError: json.error,\n                  showServerError: true,\n                  loading: false\n               });\n            } else if (json.loginToken) {\n               // remove loading spinner\n               _this.setState({ loading: false, confirmAccountSuccess: true });\n               window.sessionStorage.setItem('loginToken', json.loginToken);\n            }\n         });\n      }, _temp), _possibleConstructorReturn(_this, _ret);\n   }\n\n   // returns true if code exists and is not a number or is not 6 digits\n\n\n   ConfirmAccountModal.prototype.render = function render(props) {\n      var modalClasses = classnames_default()(\"modal\", \"modal-sm\", { \"active\": props.showModal }, { \"has-error\": this.state.codeHasError });\n\n      var errorHint = classnames_default()(\"form-input-hint\", \"float-left\", { \"d-hide\": !this.codeHasError });\n\n      return Object(preact_min[\"h\"])(\n         'div',\n         { 'class': modalClasses },\n         Object(preact_min[\"h\"])('a', { onClick: props.hideModal,\n            'class': 'modal-overlay',\n            'aria-label': 'Close'\n         }),\n         Object(preact_min[\"h\"])(\n            'div',\n            { 'class': 'modal-container' },\n            Object(preact_min[\"h\"])(\n               'div',\n               { 'class': 'modal-header' },\n               Object(preact_min[\"h\"])('a', { onClick: props.hideModal,\n                  'class': 'btn btn-clear float-right',\n                  'aria-label': 'Close'\n               }),\n               _ref\n            ),\n            Object(preact_min[\"h\"])(\n               'div',\n               { 'class': 'modal-body' },\n               this.state.confirmAccountSuccess ? _ref2 : Object(preact_min[\"h\"])(\n                  'div',\n                  { 'class': 'content' },\n                  this.state.showServerError && Object(preact_min[\"h\"])(\n                     'div',\n                     { 'class': 'toast toast-error' },\n                     this.state.serverError\n                  ),\n                  _ref3,\n                  Object(preact_min[\"h\"])(\n                     'form',\n                     { 'class': 'form-group' },\n                     Object(preact_min[\"h\"])(\n                        'p',\n                        { 'class': errorHint },\n                        'Enter a 6-digit number'\n                     ),\n                     Object(preact_min[\"h\"])(form_inputs[\"e\" /* TextInput */], {\n                        onChange: this.onChange,\n                        name: 'code',\n                        value: this.state.code,\n                        placeholder: 'e.g. 123456'\n                     })\n                  )\n               )\n            ),\n            Object(preact_min[\"h\"])(\n               'div',\n               { 'class': 'modal-footer' },\n               this.state.confirmAccountSuccess ? Object(preact_min[\"h\"])(\n                  'button',\n                  {\n                     'class': 'btn btn-primary',\n                     onClick: function onClick() {\n                        props.hideModal;window.location.reload(true);\n                     }\n                  },\n                  'Close'\n               ) : Object(preact_min[\"h\"])(\n                  'button',\n                  {\n                     'class': classnames_default()(\"btn\", \"btn-primary\", { loading: this.state.loading }),\n                     onClick: this.confirmAccount\n                  },\n                  ' Confirm'\n               )\n            )\n         )\n      );\n   };\n\n   return ConfirmAccountModal;\n}(preact_min[\"Component\"]);\n\n/* harmony default export */ var user_ConfirmAccountModal = (ConfirmAccountModal_ConfirmAccountModal);\n// EXTERNAL MODULE: ./routes/user/style.css\nvar style = __webpack_require__(\"rQOQ\");\nvar style_default = /*#__PURE__*/__webpack_require__.n(style);\n\n// CONCATENATED MODULE: ./routes/user/MemorialList.js\n\n\n\n\n\n\nvar MemorialList__ref = Object(preact_min[\"h\"])(\n   'h3',\n   { 'class': 'col' },\n   'Memorials'\n);\n\nvar MemorialList__ref2 = Object(preact_min[\"h\"])('div', { 'class': 'divider py-2' });\n\nvar MemorialList__ref3 = Object(preact_min[\"h\"])(\n   'div',\n   { 'class': 'empty-title' },\n   'You have not created any memorials'\n);\n\nvar MemorialList_MemorialList = function MemorialList(props) {\n   return Object(preact_min[\"h\"])(\n      'div',\n      null,\n      Object(preact_min[\"h\"])(\n         'div',\n         { 'class': 'row' },\n         MemorialList__ref,\n         Object(preact_min[\"h\"])(\n            'button',\n            { 'class': 'col btn btn-primary',\n               onClick: function onClick() {\n                  return Object(preact_router_es[\"route\"])(\"/create-shrine\");\n               }\n            },\n            ' Start a New Memorial'\n         )\n      ),\n      MemorialList__ref2,\n      Object(preact_min[\"h\"])(\n         'div',\n         {\n            style: \"display:flex;\" + \"flex-direction:row;\" + \"flex-wrap:wrap;\" + \"align-items:flex-start;\" + \"justify-content:flex-start;\"\n         },\n         props.memorials[0] ? props.memorials.map(function (m) {\n            return Object(preact_min[\"h\"])(MemorialList_MemorialTile, {\n               urlNm: m.urlNm,\n               urlStr: m.urlStr,\n               nm: m.nm,\n               born: m.born,\n               died: m.died,\n               avatar: m.avatar\n            });\n         }) : Object(preact_min[\"h\"])(\n            'div',\n            { 'class': 'empty', style: 'width:100%;' },\n            MemorialList__ref3,\n            Object(preact_min[\"h\"])(\n               'div',\n               { 'class': 'empty-action' },\n               Object(preact_min[\"h\"])(\n                  'button',\n                  { 'class': 'btn btn-primary',\n                     onClick: function onClick() {\n                        return Object(preact_router_es[\"route\"])(\"/create-shrine\");\n                     }\n                  },\n                  ' Start a New Memorial'\n               )\n            )\n         )\n      )\n   );\n};\n\nvar MemorialList_MemorialTile = function MemorialTile(props) {\n   return Object(preact_min[\"h\"])(\n      'div',\n      { 'class': 'tile tile-centered m-2 p-2', style: 'flex-wrap:wrap;' },\n      Object(preact_min[\"h\"])(\n         'div',\n         { 'class': 'tile-icon' },\n         Object(preact_min[\"h\"])(\n            'figure',\n            { 'class': \"avatar avatar-xl \" + style_default.a.tileAvatar },\n            Object(preact_min[\"h\"])('img', { src: props.avatar })\n         )\n      ),\n      Object(preact_min[\"h\"])(\n         'div',\n         { 'class': 'tile-content' },\n         Object(preact_min[\"h\"])(\n            'p',\n            { 'class': 'tile-title h5' },\n            props.nm\n         ),\n         props.died ? Object(preact_min[\"h\"])(\n            'p',\n            { 'class': 'tile-subtitle text-gray' },\n            props.born,\n            ' to ',\n            props.died\n         ) : Object(preact_min[\"h\"])(\n            'p',\n            { 'class': 'tile-subtitle text-gray' },\n            'b. ',\n            props.born\n         )\n      ),\n      Object(preact_min[\"h\"])(\n         'div',\n         { 'class': 'tile-action' },\n         Object(preact_min[\"h\"])(\n            'button',\n            {\n               'class': 'btn btn-sm row m-1',\n               onClick: function onClick() {\n                  return Object(preact_router_es[\"route\"])(\"/user/manage-memorial/\" + props.urlNm);\n               }\n            },\n            'Manage content'\n         ),\n         Object(preact_min[\"h\"])(\n            'button',\n            {\n               'class': 'btn btn-sm row m-1',\n               onClick: function onClick() {\n                  return Object(preact_router_es[\"route\"])(\"/\" + props.urlStr + \"/\" + props.urlNm + \"/chronicle\");\n               }\n            },\n            'View chronicle'\n         )\n      )\n   );\n};\n\n/* harmony default export */ var user_MemorialList = (MemorialList_MemorialList);\n// CONCATENATED MODULE: ../node_modules/babel-loader/lib??ref--0!./routes/user/index.js\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return user_User; });\n\n\nfunction user__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction user__possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction user__inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n// import style from './style';\n\n\n\n\n\n\nvar user__ref = Object(preact_min[\"h\"])(\n   toast[\"a\" /* default */],\n   { error: true, active: true },\n   'You must confirm your account before saving any changes'\n);\n\nvar user__ref2 = Object(preact_min[\"h\"])('div', { 'class': 'divider' });\n\nvar user__ref3 = Object(preact_min[\"h\"])(\n   'li',\n   { 'class': 'menu-item' },\n   Object(preact_min[\"h\"])(\n      preact_router_es[\"Link\"],\n      { href: '/user/settings' },\n      'Settings'\n   )\n);\n\nvar user_User = function (_Component) {\n   user__inherits(User, _Component);\n\n   function User() {\n      var _temp, _this, _ret;\n\n      user__classCallCheck(this, User);\n\n      for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n         args[_key] = arguments[_key];\n      }\n\n      return _ret = (_temp = (_this = user__possibleConstructorReturn(this, _Component.call.apply(_Component, [this].concat(args))), _this), _this.state = {\n         showModal: true\n      }, _this.hideModal = function () {\n         _this.setState({ showModal: false });\n      }, _this.neverShowConfirmationToastAgain = function () {\n         console.log(\"We'll never show the confirmation toast again\");\n         // this.setState({ ... });\n      }, _temp), user__possibleConstructorReturn(_this, _ret);\n   }\n\n   User.prototype.render = function render() {\n      var _this2 = this;\n\n      return Object(preact_min[\"h\"])(GridContainer[\"a\" /* default */], {\n         avatarColumn: Object(preact_min[\"h\"])(\n            'div',\n            { 'class': 'menu', style: 'z-index:1;' },\n            Object(preact_min[\"h\"])(\n               'p',\n               null,\n               'logged in as: ',\n               this.props.user.name || this.props.user.email\n            ),\n            this.props.user.confirmed === 'false' && Object(preact_min[\"h\"])(\n               'div',\n               null,\n               user__ref,\n               Object(preact_min[\"h\"])(\n                  'button',\n                  { 'class': 'btn btn-error centered mt-2',\n                     style: 'width:100%;',\n                     onclick: function onclick() {\n                        return _this2.setState(function (state) {\n                           return { showModal: !state.showModal };\n                        });\n                     }\n                  },\n                  ' Confirm Account'\n               )\n            ),\n            user__ref2,\n            user__ref3\n         ),\n\n         contentColumn: Object(preact_min[\"h\"])(\n            'div',\n            null,\n            Object(preact_min[\"h\"])(user_MemorialList, { memorials: this.props.user.memorials }),\n            this.props.user.confirmed === 'false' && Object(preact_min[\"h\"])(user_ConfirmAccountModal, {\n               showModal: this.state.showModal,\n               hideModal: this.hideModal\n            })\n         )\n      });\n   };\n\n   return User;\n}(preact_min[\"Component\"]);\n\n\n\n/***/ }),\n\n/***/ \"rQOQ\":\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\nmodule.exports = {\"tileAvatar\":\"tileAvatar__1s7RE\"};\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-user.chunk.f52a5.js","import { h, Component } from 'preact';\nimport API_ENDPOINT from '../../api';\nimport classnames from 'classnames';\nimport { TextInput } from '../../components/form-inputs';\nimport Toast from '../../components/toast';\n\nclass ConfirmAccountModal extends Component {\n   state = {\n      // 6-digit confirmation code\n      code: '',\n      codeHasError: false,\n      serverError: '',\n      showServerError: false,\n      confirmAccountSuccess: false,\n      loading: false\n   }\n\n   onChange = (e) => {\n      this.setState({ [e.target.name]: e.target.value });\n      this.codeHasError();\n   }\n\n   // returns true if code exists and is not a number or is not 6 digits\n   codeHasError = () => {\n      if (!this.state.code || (isNaN(this.state.code) || !(this.state.code.length === 6))) {\n         this.setState({ codeHasError: true });\n         return true;\n      } else {\n         this.setState({ codeHasError: false });\n         return false;\n      }\n   }\n\n   confirmAccount = () => {\n      if (this.codeHasError()) {\n         return;\n      }\n      this.setState({ loading: true });\n      fetch(API_ENDPOINT + '!confirmUser', {\n         method: \"POST\",\n         body: JSON.stringify({\n            loginToken: window.sessionStorage.getItem('loginToken'),\n            code: this.state.code\n         })\n      })\n      .then(res => res.json())\n      .then(json => {\n         if (json.error) {\n            this.setState({ \n               // display errors and remove loading spinner\n               serverError: json.error, \n               showServerError: true,\n               loading: false\n            });\n         } else if (json.loginToken) {\n            // remove loading spinner\n            this.setState({ loading: false, confirmAccountSuccess: true });\n            window.sessionStorage.setItem('loginToken', json.loginToken);\n         }\n      })\n   }\n\n   render (props) {\n      let modalClasses = classnames(\n         \"modal\", \"modal-sm\",\n         { \"active\": props.showModal }, \n         { \"has-error\": this.state.codeHasError }\n      );\n\n      let errorHint = classnames(\n         \"form-input-hint\",\n         \"float-left\",\n         { \"d-hide\": !this.codeHasError }\n      );\n\n      return (\n         <div class={modalClasses}>\n\n            <a onClick={props.hideModal} \n               class=\"modal-overlay\" \n               aria-label=\"Close\" \n            />\n\n            <div class=\"modal-container\">\n\n               <div class=\"modal-header\">\n                  <a onClick={props.hideModal} \n                     class=\"btn btn-clear float-right\" \n                     aria-label=\"Close\"\n                  />\n                  <div class=\"modal-title h5\">\n                     Confirm Account\n                  </div>\n               </div>\n\n               <div class=\"modal-body\">\n                  { this.state.confirmAccountSuccess ?\n                     <div>\n                        <div class=\"toast toast-success\">\n                           You're all set\n                        </div>\n                     </div>\n                        :\n                     <div class=\"content\">\n                        { this.state.showServerError &&\n                           <div class=\"toast toast-error\">\n                              {this.state.serverError}\n                           </div>\n                        }\n                        <p>We sent you an email with a 6-digit code. Please enter\n                           the code below to confirm your account.\n                        </p>\n                        <form class=\"form-group\">\n                           <p class={errorHint}>\n                              Enter a 6-digit number\n                           </p>\n                           <TextInput \n                              onChange={this.onChange}\n                              name=\"code\"\n                              value={this.state.code}\n                              placeholder=\"e.g. 123456\" \n                           />\n                        </form>\n                     </div>\n                  }\n               </div>\n\n               <div class=\"modal-footer\">\n                  { this.state.confirmAccountSuccess ?\n                     <button \n                        class=\"btn btn-primary\"\n                        onClick={() => { props.hideModal; window.location.reload(true); }}\n                     >Close\n                     </button>\n                           :\n                     <button \n                        class={classnames(\"btn\", \"btn-primary\", {loading: this.state.loading})}\n                        onClick={this.confirmAccount}\n                     > Confirm\n                     </button>\n                  }\n               </div>\n\n            </div>\n         </div>\n      );\n   }\n}\n\nexport default ConfirmAccountModal;\n\n\n\n// WEBPACK FOOTER //\n// ./routes/user/ConfirmAccountModal.js","import { h, Component } from 'preact';\nimport { route, Link } from 'preact-router';\n\nimport style from './style.css';\n\nconst MemorialList = (props) => (\n   <div>\n      <div class=\"row\">\n         <h3 class=\"col\">Memorials</h3>\n         <button class=\"col btn btn-primary\"\n            onClick={() => route(\"/create-shrine\")}\n         > Start a New Memorial\n         </button>\n      </div>\n      <div class=\"divider py-2\" />\n      <div\n         style={\n            \"display:flex;\"\n            + \"flex-direction:row;\"\n            + \"flex-wrap:wrap;\"\n            + \"align-items:flex-start;\"\n            + \"justify-content:flex-start;\"\n         }\n      >\n         { props.memorials[0] ?\n            props.memorials.map((m) => (\n               <MemorialTile \n                  urlNm={m.urlNm}\n                  urlStr={m.urlStr}\n                  nm={m.nm} \n                  born={m.born} \n                  died={m.died} \n                  avatar={m.avatar}\n               />\n            ))\n               :\n            <div class=\"empty\" style=\"width:100%;\">\n               <div class=\"empty-title\">\n                  You have not created any memorials\n               </div>\n               <div class=\"empty-action\">\n                  <button class=\"btn btn-primary\"\n                     onClick={() => route(\"/create-shrine\")}\n                  > Start a New Memorial\n                  </button>\n               </div>\n            </div>\n         }\n      </div>\n   </div>\n)\n\nconst MemorialTile = (props) => (\n   <div class=\"tile tile-centered m-2 p-2\" style=\"flex-wrap:wrap;\">\n      <div class=\"tile-icon\">\n         <figure class={\"avatar avatar-xl \" + style.tileAvatar}> \n            <img src={props.avatar} />\n         </figure>\n      </div>\n      <div class=\"tile-content\">\n         <p class=\"tile-title h5\">{props.nm}</p>\n         { props.died ?\n            <p class=\"tile-subtitle text-gray\">\n               {props.born} to {props.died}\n            </p>\n               :\n            <p class=\"tile-subtitle text-gray\">\n               b. {props.born}\n            </p>\n         }\n      </div>\n      <div class=\"tile-action\">\n         <button \n            class=\"btn btn-sm row m-1\"\n            onClick={() => route(\"/user/manage-memorial/\" + props.urlNm)}\n         > \n            Manage content\n         </button>\n         <button \n            class=\"btn btn-sm row m-1\"\n            onClick={() => route(\"/\" + props.urlStr + \"/\" + props.urlNm + \"/chronicle\")}\n         > \n            View chronicle\n         </button>\n      </div>\n   </div>\n)\n\nexport default MemorialList;\n\n\n\n// WEBPACK FOOTER //\n// ./routes/user/MemorialList.js","import { h, Component } from 'preact';\nimport { route, Link } from 'preact-router';\n// import style from './style';\n\nimport GridContainer from '../../components/GridContainer';\nimport Toast from '../../components/toast';\nimport ConfirmAccountModal from './ConfirmAccountModal';\nimport MemorialList from './MemorialList';\n\nexport default class User extends Component {\n   state = {\n      showModal: true,\n   }\n\n   hideModal = () => {\n      this.setState({ showModal: false });\n   }\n   \n   neverShowConfirmationToastAgain = () => {\n      console.log(\"We'll never show the confirmation toast again\");\n      // this.setState({ ... });\n   }\n\n   render() {\n      return (\n         <GridContainer\n            avatarColumn={\n               <div class=\"menu\" style=\"z-index:1;\">\n                  <p>logged in as: {this.props.user.name || this.props.user.email}</p>\n                  { this.props.user.confirmed === 'false' &&\n                     <div>\n                        <Toast error active >\n                           You must confirm your account before saving any changes\n                        </Toast>\n                        <button class=\"btn btn-error centered mt-2\"\n                           style=\"width:100%;\"\n                           onclick={() => this.setState((state) => ({showModal: !state.showModal}))}\n                        > Confirm Account\n                        </button>\n                     </div>\n                  }\n                  <div class=\"divider\" />\n                  <li class=\"menu-item\"><Link href=\"/user/settings\">Settings</Link></li>\n               </div>\n            }\n\n            contentColumn={\n               <div>\n                  <MemorialList memorials={this.props.user.memorials} />\n                  { this.props.user.confirmed === 'false' &&\n                     <ConfirmAccountModal\n                        showModal={this.state.showModal}\n                        hideModal={this.hideModal}\n                     />\n                  }\n               </div>\n            }\n         />\n      );\n   }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./routes/user/index.js","// removed by extract-text-webpack-plugin\nmodule.exports = {\"tileAvatar\":\"tileAvatar__1s7RE\"};\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./routes/user/style.css\n// module id = rQOQ\n// module chunks = 1"],"sourceRoot":""}